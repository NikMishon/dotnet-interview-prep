# Код-ревью (Code Review)

Код-ревью — это процесс систематической проверки исходного кода коллегами с целью выявления ошибок, улучшения качества кода и обмена знаниями. Это один из самых эффективных инструментов для поддержания здоровья кодовой базы.

## 1. Цели код-ревью
- **Повышение качества кода**:
  - **Поиск дефектов**: Обнаружение логических ошибок, потенциальных проблем с производительностью, состояний гонки и т.д.
  - **Улучшение читаемости и поддерживаемости**: Код должен быть понятен не только автору, но и другим членам команды.
  - **Соответствие стандартам**: Проверка на соблюдение принятых в команде стандартов кодирования (coding standards) и лучших практик.
- **Обмен знаниями**:
  - **Обучение**: Менее опытные разработчики учатся у более опытных.
  - **Распределение знаний**: Ревьювер знакомится с новой частью кодовой базы, что снижает "bus factor" (зависимость от одного человека).
  - **Обсуждение подходов**: Ревью может стать площадкой для обсуждения и выбора более оптимальных архитектурных решений.
- **Коллективное владение кодом (Collective Code Ownership)**:
  - **Общая ответственность**: Когда несколько человек посмотрели код, ответственность за него становится общей.
  - **Сплоченность команды**: Укрепляет чувство работы в команде над общим продуктом.

## 2. На что обращать внимание при ревью?

### Архитектура и Дизайн
- **SOLID и другие принципы**: Соответствует ли код принципам хорошего дизайна? Не нарушен ли принцип единственной ответственности? Можно ли расширить функциональность, не изменяя код?
- **Правильное размещение логики**: Находится ли код в правильном месте (в нужном проекте, слое, классе)? Не "протекают" ли абстракции? Например, не содержит ли код бизнес-логики ссылок на UI-компоненты.
- **Обработка ошибок**: Корректно ли обрабатываются исключительные ситуации? Не используются ли пустые `catch` блоки? Правильно ли выбраны типы исключений?

### Функциональность
- **Соответствие требованиям**: Делает ли код то, что от него требуется в задаче? Покрыты ли все сценарии, включая пограничные случаи?
- **Потенциальные баги**: Есть ли очевидные логические ошибки? Неправильные условия, опечатки, ошибки "off-by-one"?

### Читаемость и Стиль
- **Именование**: Понятны ли имена переменных, методов, классов? Отражают ли они свою суть?
- **Простота**: Можно ли упростить код? Нет ли излишне сложных конструкций, которые можно выразить проще? "Код пишется один раз, а читается много раз".
- **Комментарии**: Есть ли комментарии там, где они нужны (для объяснения сложной логики или неочевидных решений)? Нет ли "зашумляющих" комментариев, которые просто повторяют то, что и так видно из кода?
- **Консистентность**: Соответствует ли код стилю окружающей кодовой базы?

### Безопасность
- **Уязвимости**: Нет ли потенциальных уязвимостей (SQL-инъекции, XSS, неправильная обработка пользовательского ввода)?
- **Обращение с секретами**: Не хранятся ли в коде пароли, ключи или другие чувствительные данные?

### Тесты
- **Покрытие**: Достаточно ли тестов? Покрывают ли они как позитивные, так и негативные сценарии?
- **Качество тестов**: Понятны ли тесты? Не слишком ли они хрупкие? Проверяют ли они только один аспект поведения?

## 3. Советы для эффективного ревью
- **Будьте конструктивны и вежливы**: Цель — улучшить код, а не критиковать автора. Вместо "этот код ужасен", лучше написать "а что если попробовать такой подход? он может быть проще для понимания".
- **Автоматизируйте то, что можно**: Проверку форматирования, стиля и простые ошибки должен делать **линтер** (например, Roslyn Analyzers), а не человек.
- **Делайте небольшие Pull Request'ы**: Ревьюить 400+ строк кода за раз — тяжело и неэффективно.
- **Объясняйте свои предложения**: Не просто говорите "переименуй переменную", а объясните, **почему** предлагаемое имя лучше.
- **Задавайте вопросы**: Вместо утверждений можно задавать вопросы: "Я правильно понимаю, что эта часть кода делает X? Не приведет ли это к проблеме Y?".

## 4. Распространенные ошибки

- **"Резиновый штамп"**: Одобрение PR без внимательного прочтения.
- **Слишком долгое ревью**: Обсуждение затягивается на несколько дней. Если дискуссия в комментариях зашла в тупик, лучше созвониться или подойти и обсудить голосом.
- **"Войны правок"**: Споры о вкусах и стилях, которые не влияют на работу кода.
- **Ревью только на GitHub/GitLab**: Не забывайте локально запустить код, посмотреть, как он работает, и запустить тесты. 